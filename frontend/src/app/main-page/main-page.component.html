<div class="grid">
  <div class="leftGrid">
    <mat-list class="planList">
      @for (plan of this.plans(); track plan.id) {
      <mat-list-item
        [class]="['planListItem', this.selectedPlan() && this.selectedPlan()!.id == plan.id ? 'selected' : '']"
        (click)="onPlanSelected(plan)"
        >{{ plan.id }}</mat-list-item
      >
      }
    </mat-list>
    <div class="leftBottomGrid">
      <div class="flexColumn">
        @if (this.selectedPlan()) {
        <button
          mat-raised-button
          color="primary"
          (click)="onPredictClick()">
          Predict
        </button>
        } @if (this.selectedNodePrediction()) {
        <p>
          <span class="boldSpan">Label: </span><span>{{ this.selectedNodePrediction()?.label }}</span>
        </p>
        <p>
          <span class="boldSpan">Prediction: </span><span>{{ this.selectedNodePrediction()?.prediction }}</span>
        </p>
        }
      </div>
      <div class="flexColumn">
        @if (this.selectedPlan()) {
        <button
          mat-raised-button
          color="primary"
          (click)="onExplainClick()">
          Explain
        </button>
        }
      </div>
    </div>
  </div>
  <div class="rightGrid">
    <div class="graphBlock">
      @if(this.selectedFullPlan()) {
      <!-- <div class="graphButtons">

      </div> -->
      <app-plan-graph
        [graph]="this.selectedFullPlan()"
        [explanation]="this.selectedNodeExplanation()"
        (onNodeSelected)="onNodeSelected($event)"></app-plan-graph>
      }
    </div>
    @if (this.selectedNode()) {
    <mat-list class="nodeInfoList">
      @for (nodeInfo of this.selectedNodeInfoFields(); track nodeInfo.name) {
      <mat-list-item>
        <span class="boldSpan">{{ nodeInfo.name }}: </span>
        <span>{{ nodeInfo.value }}</span>
        @if (this.selectedNodeFeatureImportance() && this.selectedNodeFeatureImportance()[nodeInfo.name]) {
        <span>{{ '\t\t\t\t\t\t\t\t\t\t\t\t' }}</span>
        <span class="boldSpan">Importance: </span>
        <span>{{ this.selectedNodeFeatureImportance()[nodeInfo.name] }}</span>
        }
      </mat-list-item>
      }
    </mat-list>
    }
  </div>
</div>
